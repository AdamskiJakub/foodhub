generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int       @id @default(autoincrement())
  email     String    @unique
  password  String
  name      String?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  comments  Comment[]
  ratings   Rating[]
}

model Restaurant {
  id                  Int       @id @default(autoincrement())
  osmId               String    @unique // ID z OpenStreetMap
  name                String
  city                String
  country             String    @default("PL")
  street              String
  housenumber         String?
  postcode            String?
  cuisine             String?
  email               String?
  phone               String?
  website             String?
  operator            String?
  openingHours        String?
  coordinates         Json?
  building            String?   
  buildingLevels      String?   
  buildingMaterial    String?   
  checkDate           String?   
  outdoorSeating      Boolean?  
  smoking             String?   
  takeaway            Boolean?  
  delivery            Boolean?  
  wheelchair          String?   
  reservation         Boolean?  
  paymentMethods      Json?     
  contactEmail        String?   
  contactFacebook     String?   
  contactInstagram    String?   
  contactMobile       String?   
  contactWebsite      String?   
  officialName        String?   
  dietVegetarian      Boolean?  
  createdAt           DateTime  
  updatedAt           DateTime 
  comments            Comment[]
  ratings             Rating[]
}

model Comment {
  id           Int       @id @default(autoincrement())
  content      String
  userId       Int
  user         User      @relation(fields: [userId], references: [id])
  restaurantId Int
  restaurant   Restaurant @relation(fields: [restaurantId], references: [id])
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model Rating {
  id           Int       @id @default(autoincrement())
  value        Int       // from 1 to 5 ( validate in application )
  userId       Int
  user         User      @relation(fields: [userId], references: [id])
  restaurantId Int
  restaurant   Restaurant @relation(fields: [restaurantId], references: [id])
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}